<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensor Fusion Library: src/sensor_fusion/control.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sensor Fusion Library
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Orientation sensing for Espressif (ESP32, ESP8266) processors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_6c27f870686619d49dbb46eee7e71f8b.html">sensor_fusion</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">control.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines control sub-system.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="control_8h__dep__incl.png" border="0" usemap="#src_2sensor__fusion_2control_8hdep" alt=""/></div>
<map name="src_2sensor__fusion_2control_8hdep" id="src_2sensor__fusion_2control_8hdep">
<area shape="rect" title="Defines control sub&#45;system." alt="" coords="549,5,745,32"/>
<area shape="rect" href="sensor__fusion__class_8h.html" title="Wrapper for the NXP Sensor Fusion v 7 functions." alt="" coords="5,87,192,114"/>
<area shape="rect" href="control_8cpp.html" title="Defines control sub&#45;system." alt="" coords="216,87,427,114"/>
<area shape="rect" href="control__input_8c.html" title="Command interpreter which interfaces to the Sensor Fusion Toolbox. Commands sent from the Toolbox (e...." alt="" coords="451,80,635,121"/>
<area shape="rect" href="control__output_8c.html" title="Implements output streaming for the control &amp; status subsystem. Data is packaged up in format compati..." alt="" coords="659,80,843,121"/>
<area shape="rect" href="fusion__testing_8c.html" title="ApplyPerturbation function used to analyze dynamic performance." alt="" coords="867,80,1045,121"/>
<area shape="rect" href="sensor__fusion_8c.html" title="The sensor_fusion.c file implements the top level programming interface." alt="" coords="1070,80,1253,121"/>
</map>
</div>
</div>
<p><a href="control_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structControlSubsystem.html">ControlSubsystem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions.">ControlSubsystem</a> encapsulates command and data streaming functions.  <a href="structControlSubsystem.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a58ba7506d8affb446196806c39823c3a"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structControlSubsystem.html">ControlSubsystem</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8h.html#a58ba7506d8affb446196806c39823c3a">ControlSubsystem</a></td></tr>
<tr class="memdesc:a58ba7506d8affb446196806c39823c3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions.">ControlSubsystem</a> encapsulates command and data streaming functions.  <a href="control_8h.html#a58ba7506d8affb446196806c39823c3a">More...</a><br /></td></tr>
<tr class="separator:a58ba7506d8affb446196806c39823c3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Control Port Function Type Definitions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>"write" "stream" and "readCommands" provide three control functions visible at the main() level. These typedefs define the structure of those calls. </p>
</div></td></tr>
<tr class="memitem:a9508a1ef3ad5ed2ba22c1db98d56b562"><td class="memItemLeft" align="right" valign="top"><a id="a9508a1ef3ad5ed2ba22c1db98d56b562"></a>
typedef int8_t()&#160;</td><td class="memItemRight" valign="bottom"><b>writePort_t</b>(<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *sfg)</td></tr>
<tr class="separator:a9508a1ef3ad5ed2ba22c1db98d56b562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52e8fd1ad315b28ed8a703311986463"><td class="memItemLeft" align="right" valign="top"><a id="ac52e8fd1ad315b28ed8a703311986463"></a>
typedef int8_t()&#160;</td><td class="memItemRight" valign="bottom"><b>readCommand_t</b>(<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *sfg)</td></tr>
<tr class="separator:ac52e8fd1ad315b28ed8a703311986463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99b9926a511c2652967adf0ca5e64c32"><td class="memItemLeft" align="right" valign="top"><a id="a99b9926a511c2652967adf0ca5e64c32"></a>
typedef void()&#160;</td><td class="memItemRight" valign="bottom"><b>streamData_t</b>(<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *sfg)</td></tr>
<tr class="separator:a99b9926a511c2652967adf0ca5e64c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad828389eaed1cef9fd06a6c10a94682f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8h.html#ad828389eaed1cef9fd06a6c10a94682f">initializeControlPort</a> (<a class="el" href="structControlSubsystem.html">ControlSubsystem</a> *pComm, const void *serial_port, const void *tcp_client)</td></tr>
<tr class="memdesc:ad828389eaed1cef9fd06a6c10a94682f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call this once to initialize structures, ports, etc.  <a href="control_8h.html#ad828389eaed1cef9fd06a6c10a94682f">More...</a><br /></td></tr>
<tr class="separator:ad828389eaed1cef9fd06a6c10a94682f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c505037fb39b30c214dc68a65676f9"><td class="memItemLeft" align="right" valign="top"><a id="aa3c505037fb39b30c214dc68a65676f9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>UpdateTCPClient</b> (<a class="el" href="structControlSubsystem.html">ControlSubsystem</a> *pComm, void *tcp_client)</td></tr>
<tr class="separator:aa3c505037fb39b30c214dc68a65676f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da1153dfe8ff9b0b610e7d55a92f3ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8h.html#a4da1153dfe8ff9b0b610e7d55a92f3ca">CreateOutgoingPackets</a> (<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *sfg)</td></tr>
<tr class="separator:a4da1153dfe8ff9b0b610e7d55a92f3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc925ab9ed0cd96b9673a9c46d7218fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8h.html#afc925ab9ed0cd96b9673a9c46d7218fc">DecodeCommandBytes</a> (<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *sfg, uint8_t input_buffer[], uint16_t nbytes)</td></tr>
<tr class="separator:afc925ab9ed0cd96b9673a9c46d7218fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b2900e9277b457cea45461f8dce3ef"><td class="memItemLeft" align="right" valign="top"><a id="af9b2900e9277b457cea45461f8dce3ef"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="control_8h.html#af9b2900e9277b457cea45461f8dce3ef">OutputBufAppendItem</a> (uint8_t *pDest, uint16_t *pIndex, uint8_t *pSource, uint16_t iBytesToCopy)</td></tr>
<tr class="memdesc:af9b2900e9277b457cea45461f8dce3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function used to place data in output buffer about to be transmitted via UART. <br /></td></tr>
<tr class="separator:af9b2900e9277b457cea45461f8dce3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines control sub-system. </p>
<p>Each sensor fusion application will have its own set of functions to control the fusion process and report results. This file defines the programming interface that should be followed in order for the fusion functions to operate correctly out of the box. The actual command interpreter is defined separately in <a class="el" href="control__input_8c.html" title="Command interpreter which interfaces to the Sensor Fusion Toolbox. Commands sent from the Toolbox (e....">control_input.c</a>. The output streaming function is defined in <a class="el" href="control__output_8c.html" title="Implements output streaming for the control &amp; status subsystem. Data is packaged up in format compati...">control_output.c</a>. Via these three files, the NXP Sensor Fusion Library provides a default set of functions which are compatible with the Sensor Fusion Toolbox. Use of the toolbox is highly recommended at least during initial development, as it provides many useful debug features. The NXP development team will typically require use of the toolbox as a pre-requisite for providing software support. Data packets are sent via serial interface, which can be a wired UART, Bluetooth, socket via WiFi, etc. Currently UART &amp; WiFi are implemented. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a58ba7506d8affb446196806c39823c3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58ba7506d8affb446196806c39823c3a">&#9670;&nbsp;</a></span>ControlSubsystem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structControlSubsystem.html">ControlSubsystem</a> <a class="el" href="structControlSubsystem.html">ControlSubsystem</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The <a class="el" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions.">ControlSubsystem</a> encapsulates command and data streaming functions. </p>
<p>The <a class="el" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions.">ControlSubsystem</a> encapsulates command and data streaming functions for the library. A C++-like typedef structure which includes executable methods for the subsystem is defined here. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4da1153dfe8ff9b0b610e7d55a92f3ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da1153dfe8ff9b0b610e7d55a92f3ca">&#9670;&nbsp;</a></span>CreateOutgoingPackets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CreateOutgoingPackets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called once per fusion cycle to stream information required by the NXP Sensor Fusion Toolbox. Packet protocols are defined in the NXP Sensor Fusion for Kinetis Product Development Kit User Guide. </p>

</div>
</div>
<a id="afc925ab9ed0cd96b9673a9c46d7218fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc925ab9ed0cd96b9673a9c46d7218fc">&#9670;&nbsp;</a></span>DecodeCommandBytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DecodeCommandBytes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td>
          <td class="paramname"><em>sfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>input_buffer</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nbytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is responsible for decoding commands sent by the NXP Sensor Fusion Toolbox and setting the appropriate flags in the <a class="el" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions.">ControlSubsystem</a> data structure. Packet protocols are defined in the NXP Sensor Fusion for Kinetis Product Development Kit User Guide. </p>

</div>
</div>
<a id="ad828389eaed1cef9fd06a6c10a94682f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad828389eaed1cef9fd06a6c10a94682f">&#9670;&nbsp;</a></span>initializeControlPort()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool initializeControlPort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structControlSubsystem.html">ControlSubsystem</a> *&#160;</td>
          <td class="paramname"><em>pComm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>serial_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tcp_client</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call this once to initialize structures, ports, etc. </p>
<p>Call this once to initialize structures, ports, etc. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
