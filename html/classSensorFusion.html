<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Sensor Fusion Library: SensorFusion Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Sensor Fusion Library
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">Orientation sensing for Espressif (ESP32, ESP8266) processors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classSensorFusion-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SensorFusion Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="sensor__fusion__class_8h_source.html">sensor_fusion_class.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for SensorFusion:</div>
<div class="dyncontent">
<div class="center"><img src="classSensorFusion__coll__graph.png" border="0" usemap="#SensorFusion_coll__map" alt="Collaboration graph"/></div>
<map name="SensorFusion_coll__map" id="SensorFusion_coll__map">
<area shape="rect" title=" " alt="" coords="261,288,369,315"/>
<area shape="rect" href="structStatusSubsystem.html" title="StatusSubsystem() provides an object&#45;like interface for communicating status to the user." alt="" coords="5,109,140,136"/>
<area shape="rect" href="structSensorFusionGlobals.html" title="The top level fusion structure." alt="" coords="349,199,506,225"/>
<area shape="rect" href="structPhysicalSensor.html" title="An instance of PhysicalSensor structure type should be allocated for each physical sensors (combo dev..." alt="" coords="165,109,285,136"/>
<area shape="rect" href="structregisterDeviceInfo__t.html" title="This structure defines the device specific info required by register I/O." alt="" coords="147,5,302,32"/>
<area shape="rect" href="structMagCalibration.html" title="Magnetic Calibration Structure." alt="" coords="367,109,488,136"/>
<area shape="rect" href="structMagBuffer.html" title=" " alt="" coords="512,109,601,136"/>
<area shape="rect" href="structMagSensor.html" title="The MagSensor structure stores raw and processed measurements for a 3&#45;axis magnetic sensor." alt="" coords="625,109,720,136"/>
<area shape="rect" href="structControlSubsystem.html" title="The ControlSubsystem encapsulates command and data streaming functions." alt="" coords="763,109,905,136"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aad45992c0a61f373325e4d00d58d2ae7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#aad45992c0a61f373325e4d00d58d2ae7">SensorFusion</a> (int8_t pin_i2c_sda=-1, int8_t pin_i2c_scl=-1)</td></tr>
<tr class="separator:aad45992c0a61f373325e4d00d58d2ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29962faed281bc60b78c3b4b4588cda3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a29962faed281bc60b78c3b4b4588cda3">InstallSensor</a> (uint8_t sensor_i2c_addr, <a class="el" href="sensor__fusion__class_8h.html#a213c434cb928c4ca22513e2302632435">SensorType</a> sensor_type)</td></tr>
<tr class="memdesc:a29962faed281bc60b78c3b4b4588cda3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Install Sensor in linked list The max length of the list is checked, and if there is room, the given sensor is inserted at the head of the list. An accelerometer and magnetometer may be combined in one IC - if that is the case then only one call is required to install, provided the associated *_Init() and *_Read() function reads both the accel &amp; magnetometer data. The Init() and Read() functions of each sensor are defined in driver_*.* files.  <a href="classSensorFusion.html#a29962faed281bc60b78c3b4b4588cda3">More...</a><br /></td></tr>
<tr class="separator:a29962faed281bc60b78c3b4b4588cda3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ba1c764293c25c903c984ae01226392"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a0ba1c764293c25c903c984ae01226392">InitializeFusionEngine</a> (void)</td></tr>
<tr class="separator:a0ba1c764293c25c903c984ae01226392"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cc200a7d47a0c04a842f63355d028e9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a8cc200a7d47a0c04a842f63355d028e9">InitializeControlSubsystem</a> (const Stream *serial_port=NULL, const Stream *tcp_client=NULL)</td></tr>
<tr class="separator:a8cc200a7d47a0c04a842f63355d028e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a493cf7acac92d0e50be057e3f6492dd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a493cf7acac92d0e50be057e3f6492dd3">UpdateWiFiStream</a> (void *tcp_client)</td></tr>
<tr class="memdesc:a493cf7acac92d0e50be057e3f6492dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the TCP client pointer. Call when a new TCP connection is made, as reported by WiFiServer::available() When tcp_client is NULL, output via WiFi is not attempted.  <a href="classSensorFusion.html#a493cf7acac92d0e50be057e3f6492dd3">More...</a><br /></td></tr>
<tr class="separator:a493cf7acac92d0e50be057e3f6492dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d7573317add4ffb98231ea3f478cb75"><td class="memItemLeft" align="right" valign="top"><a id="a7d7573317add4ffb98231ea3f478cb75"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a7d7573317add4ffb98231ea3f478cb75">ReadSensors</a> (void)</td></tr>
<tr class="memdesc:a7d7573317add4ffb98231ea3f478cb75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads all sensors. Applies HAL remapping, removes invalid values, and stores data for later processing. Depending on whether a sensor has a built-in FIFO buffer, that sensor may not be read each time this method is called. See kLoopsPerMagRead, etc., in <a class="el" href="sensor__fusion__class_8h.html">sensor_fusion_class.h</a>. <br /></td></tr>
<tr class="separator:a7d7573317add4ffb98231ea3f478cb75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1b6f69aee1de8b1514539765ef4b119"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#aa1b6f69aee1de8b1514539765ef4b119">RunFusion</a> (void)</td></tr>
<tr class="memdesc:aa1b6f69aee1de8b1514539765ef4b119"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply fusion algorithm. Sensor readings contained in global struct are calibrated and processed. Status is updated. Loop counter used for coordinating sensor reads is reset.  <a href="classSensorFusion.html#aa1b6f69aee1de8b1514539765ef4b119">More...</a><br /></td></tr>
<tr class="separator:aa1b6f69aee1de8b1514539765ef4b119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a639c646f972bb29bccd60ef1926735dc"><td class="memItemLeft" align="right" valign="top"><a id="a639c646f972bb29bccd60ef1926735dc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a639c646f972bb29bccd60ef1926735dc">ProduceToolboxOutput</a> (void)</td></tr>
<tr class="memdesc:a639c646f972bb29bccd60ef1926735dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate and send out data, formatted for NXP Orientation Sensor Toolbox. It is not mandatory to call this routine, if Toolbox output is not needed. <br /></td></tr>
<tr class="separator:a639c646f972bb29bccd60ef1926735dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb9854e0dc23586327c7cbf9377a7d72"><td class="memItemLeft" align="right" valign="top"><a id="adb9854e0dc23586327c7cbf9377a7d72"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#adb9854e0dc23586327c7cbf9377a7d72">ProcessCommands</a> (void)</td></tr>
<tr class="memdesc:adb9854e0dc23586327c7cbf9377a7d72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process any incoming commands. Commands may arrive by serial or WiFi connection, depending on which of these is enabled (if any). It is not mandatory to call this routine, if command responses are not needed. <br /></td></tr>
<tr class="separator:adb9854e0dc23586327c7cbf9377a7d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeacc830ce9871cb60ee4086068d5cec7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#aeacc830ce9871cb60ee4086068d5cec7">GetHeadingDegrees</a> (void)</td></tr>
<tr class="separator:aeacc830ce9871cb60ee4086068d5cec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b97277eb26e5cb28c4c8a12af1ed8b6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a3b97277eb26e5cb28c4c8a12af1ed8b6">GetPitchDegrees</a> (void)</td></tr>
<tr class="separator:a3b97277eb26e5cb28c4c8a12af1ed8b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240b197f805cac0f8553e4851fa08f49"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a240b197f805cac0f8553e4851fa08f49">GetRollDegrees</a> (void)</td></tr>
<tr class="separator:a240b197f805cac0f8553e4851fa08f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35a898e6f73a16b86448da7fc7f74b0f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a35a898e6f73a16b86448da7fc7f74b0f">GetAccelXGees</a> (void)</td></tr>
<tr class="separator:a35a898e6f73a16b86448da7fc7f74b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db34965d3d35199e6257c7e6a081fba"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a4db34965d3d35199e6257c7e6a081fba">GetAccelYGees</a> (void)</td></tr>
<tr class="separator:a4db34965d3d35199e6257c7e6a081fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c01e361312d241251cb26b09603aae"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#ad2c01e361312d241251cb26b09603aae">GetAccelZGees</a> (void)</td></tr>
<tr class="separator:ad2c01e361312d241251cb26b09603aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c374b3b2242ffee93cebd9335caee3e"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a6c374b3b2242ffee93cebd9335caee3e">GetTurnRateDegPerS</a> (void)</td></tr>
<tr class="separator:a6c374b3b2242ffee93cebd9335caee3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501059a454deb95fed1e01c6e2c78eec"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a501059a454deb95fed1e01c6e2c78eec">GetPitchRateDegPerS</a> (void)</td></tr>
<tr class="separator:a501059a454deb95fed1e01c6e2c78eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9c05976053be9717eac93d5cc22c17"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#abe9c05976053be9717eac93d5cc22c17">GetRollRateDegPerS</a> (void)</td></tr>
<tr class="separator:abe9c05976053be9717eac93d5cc22c17"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a90a3b268bdc22c23a07917de1866148c"><td class="memItemLeft" align="right" valign="top"><a id="a90a3b268bdc22c23a07917de1866148c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a90a3b268bdc22c23a07917de1866148c">InitializeStatusSubsystem</a> (void)</td></tr>
<tr class="memdesc:a90a3b268bdc22c23a07917de1866148c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the Status reporting system. Status is indicated by LEDs, but other means can be added. <br /></td></tr>
<tr class="separator:a90a3b268bdc22c23a07917de1866148c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd59be40f801b6ce607101103c4e9bad"><td class="memItemLeft" align="right" valign="top"><a id="acd59be40f801b6ce607101103c4e9bad"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#acd59be40f801b6ce607101103c4e9bad">InitializeSensorFusionGlobals</a> (void)</td></tr>
<tr class="memdesc:acd59be40f801b6ce607101103c4e9bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the starting values of variables contained in sfg_. <br /></td></tr>
<tr class="separator:acd59be40f801b6ce607101103c4e9bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a4bfe578196cc3296f0428f1d633c70a5"><td class="memItemLeft" align="right" valign="top"><a id="a4bfe578196cc3296f0428f1d633c70a5"></a>
<a class="el" href="structSensorFusionGlobals.html">SensorFusionGlobals</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a4bfe578196cc3296f0428f1d633c70a5">sfg_</a></td></tr>
<tr class="memdesc:a4bfe578196cc3296f0428f1d633c70a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Primary sensor fusion data structure. <br /></td></tr>
<tr class="separator:a4bfe578196cc3296f0428f1d633c70a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03cbe4eb9b7709d1db6fa831aef30861"><td class="memItemLeft" align="right" valign="top"><a id="a03cbe4eb9b7709d1db6fa831aef30861"></a>
<a class="el" href="structControlSubsystem.html">ControlSubsystem</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a03cbe4eb9b7709d1db6fa831aef30861">control_subsystem_</a></td></tr>
<tr class="memdesc:a03cbe4eb9b7709d1db6fa831aef30861"><td class="mdescLeft">&#160;</td><td class="mdescRight">command and data streaming structure <br /></td></tr>
<tr class="separator:a03cbe4eb9b7709d1db6fa831aef30861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac11693f2631da7af888911dcf1a72b"><td class="memItemLeft" align="right" valign="top"><a id="afac11693f2631da7af888911dcf1a72b"></a>
<a class="el" href="structStatusSubsystem.html">StatusSubsystem</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#afac11693f2631da7af888911dcf1a72b">status_subsystem_</a></td></tr>
<tr class="memdesc:afac11693f2631da7af888911dcf1a72b"><td class="mdescLeft">&#160;</td><td class="mdescRight">visual status indicator structure <br /></td></tr>
<tr class="separator:afac11693f2631da7af888911dcf1a72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68577d10c18876769a39c9ae3a2366b6"><td class="memItemLeft" align="right" valign="top"><a id="a68577d10c18876769a39c9ae3a2366b6"></a>
<a class="el" href="structPhysicalSensor.html">PhysicalSensor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a68577d10c18876769a39c9ae3a2366b6">sensors_</a></td></tr>
<tr class="memdesc:a68577d10c18876769a39c9ae3a2366b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">linked list of up to 4 sensors <br /></td></tr>
<tr class="separator:a68577d10c18876769a39c9ae3a2366b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b99adadae840e21ae2f7252a4750aff"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a1b99adadae840e21ae2f7252a4750aff">num_sensors_installed_</a></td></tr>
<tr class="memdesc:a1b99adadae840e21ae2f7252a4750aff"><td class="mdescLeft">&#160;</td><td class="mdescRight">tracks how many sensors have been added to list  <a href="classSensorFusion.html#a1b99adadae840e21ae2f7252a4750aff">More...</a><br /></td></tr>
<tr class="separator:a1b99adadae840e21ae2f7252a4750aff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ced6fbf3966d9a5350d6d02fe68c71e"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a4ced6fbf3966d9a5350d6d02fe68c71e">kLoopsPerMagRead</a></td></tr>
<tr class="memdesc:a4ced6fbf3966d9a5350d6d02fe68c71e"><td class="mdescLeft">&#160;</td><td class="mdescRight">how often a magnetometer read is performed  <a href="classSensorFusion.html#a4ced6fbf3966d9a5350d6d02fe68c71e">More...</a><br /></td></tr>
<tr class="separator:a4ced6fbf3966d9a5350d6d02fe68c71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1def9458ee27d8d6bff3381796c56550"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a1def9458ee27d8d6bff3381796c56550">kLoopsPerAccelRead</a></td></tr>
<tr class="memdesc:a1def9458ee27d8d6bff3381796c56550"><td class="mdescLeft">&#160;</td><td class="mdescRight">how often an accelerometer read is performed  <a href="classSensorFusion.html#a1def9458ee27d8d6bff3381796c56550">More...</a><br /></td></tr>
<tr class="separator:a1def9458ee27d8d6bff3381796c56550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83380e9ad84408827b9f24bb38e1fe6a"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a83380e9ad84408827b9f24bb38e1fe6a">kLoopsPerGyroRead</a></td></tr>
<tr class="memdesc:a83380e9ad84408827b9f24bb38e1fe6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">how often a gyroscope read is performed  <a href="classSensorFusion.html#a83380e9ad84408827b9f24bb38e1fe6a">More...</a><br /></td></tr>
<tr class="separator:a83380e9ad84408827b9f24bb38e1fe6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab62b17efb7e67cdbaf78f5ba62b97d7d"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#ab62b17efb7e67cdbaf78f5ba62b97d7d">kLoopsPerFusionCalc</a></td></tr>
<tr class="memdesc:ab62b17efb7e67cdbaf78f5ba62b97d7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">how often to fuse. Usually the max of previous 3 constants.  <a href="classSensorFusion.html#ab62b17efb7e67cdbaf78f5ba62b97d7d">More...</a><br /></td></tr>
<tr class="separator:ab62b17efb7e67cdbaf78f5ba62b97d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e639e936fa40817d4d4ac1a6d7ce707"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSensorFusion.html#a2e639e936fa40817d4d4ac1a6d7ce707">loops_per_fuse_counter_</a></td></tr>
<tr class="memdesc:a2e639e936fa40817d4d4ac1a6d7ce707"><td class="mdescLeft">&#160;</td><td class="mdescRight">counts how many times through loop have been done  <a href="classSensorFusion.html#a2e639e936fa40817d4d4ac1a6d7ce707">More...</a><br /></td></tr>
<tr class="separator:a2e639e936fa40817d4d4ac1a6d7ce707"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class that wraps the various mostly-C-style functions of the sensor fusion code into easier to use methods. Not all the lower-level functions are exposed however; for more advanced use it may be necessary to call them directly. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aad45992c0a61f373325e4d00d58d2ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad45992c0a61f373325e4d00d58d2ae7">&#9670;&nbsp;</a></span>SensorFusion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SensorFusion::SensorFusion </td>
          <td>(</td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>pin_i2c_sda</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>pin_i2c_scl</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor creates and initializes a structure of variables used throughout the functions. It initializes the control and status subsystems as well as several subordinate data structures. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a35a898e6f73a16b86448da7fc7f74b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35a898e6f73a16b86448da7fc7f74b0f">&#9670;&nbsp;</a></span>GetAccelXGees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetAccelXGees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the X-axis Accleration in gees </dd></dl>

</div>
</div>
<a id="a4db34965d3d35199e6257c7e6a081fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db34965d3d35199e6257c7e6a081fba">&#9670;&nbsp;</a></span>GetAccelYGees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetAccelYGees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Y-axis Accleration in gees </dd></dl>

</div>
</div>
<a id="ad2c01e361312d241251cb26b09603aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2c01e361312d241251cb26b09603aae">&#9670;&nbsp;</a></span>GetAccelZGees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetAccelZGees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Z-axis Accleration in gees </dd></dl>

</div>
</div>
<a id="aeacc830ce9871cb60ee4086068d5cec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeacc830ce9871cb60ee4086068d5cec7">&#9670;&nbsp;</a></span>GetHeadingDegrees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetHeadingDegrees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Compass Heading in degrees </dd></dl>

</div>
</div>
<a id="a3b97277eb26e5cb28c4c8a12af1ed8b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b97277eb26e5cb28c4c8a12af1ed8b6">&#9670;&nbsp;</a></span>GetPitchDegrees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetPitchDegrees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Pitch in degrees </dd></dl>

</div>
</div>
<a id="a501059a454deb95fed1e01c6e2c78eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501059a454deb95fed1e01c6e2c78eec">&#9670;&nbsp;</a></span>GetPitchRateDegPerS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetPitchRateDegPerS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Pitch Rate in degrees/s </dd></dl>

</div>
</div>
<a id="a240b197f805cac0f8553e4851fa08f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a240b197f805cac0f8553e4851fa08f49">&#9670;&nbsp;</a></span>GetRollDegrees()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetRollDegrees </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Roll in degrees </dd></dl>

</div>
</div>
<a id="abe9c05976053be9717eac93d5cc22c17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9c05976053be9717eac93d5cc22c17">&#9670;&nbsp;</a></span>GetRollRateDegPerS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetRollRateDegPerS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Roll Rate in degrees/s </dd></dl>

</div>
</div>
<a id="a6c374b3b2242ffee93cebd9335caee3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c374b3b2242ffee93cebd9335caee3e">&#9670;&nbsp;</a></span>GetTurnRateDegPerS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float SensorFusion::GetTurnRateDegPerS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Return the Turn Rate in degrees </dd></dl>

</div>
</div>
<a id="a8cc200a7d47a0c04a842f63355d028e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8cc200a7d47a0c04a842f63355d028e9">&#9670;&nbsp;</a></span>InitializeControlSubsystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SensorFusion::InitializeControlSubsystem </td>
          <td>(</td>
          <td class="paramtype">const Stream *&#160;</td>
          <td class="paramname"><em>serial_port</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Stream *&#160;</td>
          <td class="paramname"><em>tcp_client</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the Control subsystem, which receives external commands and sends data packets. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial_port</td><td>A Stream pointer to which to send output and receive commands. If NULL, then output is not attempted. </td></tr>
    <tr><td class="paramname">tcp_client</td><td>A WiFiClient pointer to which to send output and receive commands. If NULL, then output is not attempted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the Control subsystem is initialized, else False. </dd></dl>

</div>
</div>
<a id="a0ba1c764293c25c903c984ae01226392"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ba1c764293c25c903c984ae01226392">&#9670;&nbsp;</a></span>InitializeFusionEngine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SensorFusion::InitializeFusionEngine </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the Sensors. Read calibrations. Set status to Normal. </p>

</div>
</div>
<a id="a29962faed281bc60b78c3b4b4588cda3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29962faed281bc60b78c3b4b4588cda3">&#9670;&nbsp;</a></span>InstallSensor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool SensorFusion::InstallSensor </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sensor_i2c_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="sensor__fusion__class_8h.html#a213c434cb928c4ca22513e2302632435">SensorType</a>&#160;</td>
          <td class="paramname"><em>sensor_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Install Sensor in linked list The max length of the list is checked, and if there is room, the given sensor is inserted at the head of the list. An accelerometer and magnetometer may be combined in one IC - if that is the case then only one call is required to install, provided the associated *_Init() and *_Read() function reads both the accel &amp; magnetometer data. The Init() and Read() functions of each sensor are defined in driver_*.* files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_i2c_addr</td><td>is the I2C bus address of the sensor IC </td></tr>
    <tr><td class="paramname">sensor_type</td><td>indicates the type of sensor (e.g. magnetometer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if sensor installed successfully, else False </dd></dl>

</div>
</div>
<a id="aa1b6f69aee1de8b1514539765ef4b119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1b6f69aee1de8b1514539765ef4b119">&#9670;&nbsp;</a></span>RunFusion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SensorFusion::RunFusion </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply fusion algorithm. Sensor readings contained in global struct are calibrated and processed. Status is updated. Loop counter used for coordinating sensor reads is reset. </p>

</div>
</div>
<a id="a493cf7acac92d0e50be057e3f6492dd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a493cf7acac92d0e50be057e3f6492dd3">&#9670;&nbsp;</a></span>UpdateWiFiStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SensorFusion::UpdateWiFiStream </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tcp_client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the TCP client pointer. Call when a new TCP connection is made, as reported by WiFiServer::available() When tcp_client is NULL, output via WiFi is not attempted. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tcp_client</td><td>A WiFiClient pointer used for input/output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1def9458ee27d8d6bff3381796c56550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1def9458ee27d8d6bff3381796c56550">&#9670;&nbsp;</a></span>kLoopsPerAccelRead</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SensorFusion::kLoopsPerAccelRead</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        1</div>
</div><!-- fragment -->
<p>how often an accelerometer read is performed </p>

</div>
</div>
<a id="ab62b17efb7e67cdbaf78f5ba62b97d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab62b17efb7e67cdbaf78f5ba62b97d7d">&#9670;&nbsp;</a></span>kLoopsPerFusionCalc</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SensorFusion::kLoopsPerFusionCalc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        1</div>
</div><!-- fragment -->
<p>how often to fuse. Usually the max of previous 3 constants. </p>

</div>
</div>
<a id="a83380e9ad84408827b9f24bb38e1fe6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83380e9ad84408827b9f24bb38e1fe6a">&#9670;&nbsp;</a></span>kLoopsPerGyroRead</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SensorFusion::kLoopsPerGyroRead</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        1</div>
</div><!-- fragment -->
<p>how often a gyroscope read is performed </p>

</div>
</div>
<a id="a4ced6fbf3966d9a5350d6d02fe68c71e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ced6fbf3966d9a5350d6d02fe68c71e">&#9670;&nbsp;</a></span>kLoopsPerMagRead</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t SensorFusion::kLoopsPerMagRead</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        1</div>
</div><!-- fragment -->
<p>how often a magnetometer read is performed </p>
<p>Constants of the form kLoopsPer_____ set the relationship between number of sensor reads and each execution of the fusion algorithm. Normally there is a 1:1 relationship (i.e. read, fuse, read, fuse,...) but other arrangements are possible (e.g. read, read, fuse, read, read,...) The rate at which main loop() executes is set by LOOP_RATE_HZ in <a class="el" href="build_8h.html" title="Build configuration file.">build.h</a> </p>

</div>
</div>
<a id="a2e639e936fa40817d4d4ac1a6d7ce707"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e639e936fa40817d4d4ac1a6d7ce707">&#9670;&nbsp;</a></span>loops_per_fuse_counter_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SensorFusion::loops_per_fuse_counter_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        0</div>
</div><!-- fragment -->
<p>counts how many times through loop have been done </p>

</div>
</div>
<a id="a1b99adadae840e21ae2f7252a4750aff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b99adadae840e21ae2f7252a4750aff">&#9670;&nbsp;</a></span>num_sensors_installed_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SensorFusion::num_sensors_installed_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">        0</div>
</div><!-- fragment -->
<p>tracks how many sensors have been added to list </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="sensor__fusion__class_8h_source.html">sensor_fusion_class.h</a></li>
<li>src/<a class="el" href="sensor__fusion__class_8cc.html">sensor_fusion_class.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
